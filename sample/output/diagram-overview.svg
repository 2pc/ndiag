<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: ndiag Pages: 1 -->
<svg width="366pt" height="344pt"
 viewBox="0.00 0.00 366.34 344.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 340)">
<title>ndiag</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-340 362.3394,-340 362.3394,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_consul:dc1</title>
<path fill="#4b75b9" fill-opacity="0.200000" stroke="#4b75b9" stroke-opacity="0.200000" d="M20,-8C20,-8 276,-8 276,-8 282,-8 288,-14 288,-20 288,-20 288,-316 288,-316 288,-322 282,-328 276,-328 276,-328 20,-328 20,-328 14,-328 8,-322 8,-316 8,-316 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="148" y="-311.4" font-family="Arial" font-size="14.00" fill="#000000">consul:dc1</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_vip_group:lb</title>
<path fill="#4b75b9" fill-opacity="0.200000" stroke="#4b75b9" stroke-opacity="0.200000" d="M106,-100.8C106,-100.8 268,-100.8 268,-100.8 274,-100.8 280,-106.8 280,-112.8 280,-112.8 280,-283.2 280,-283.2 280,-289.2 274,-295.2 268,-295.2 268,-295.2 106,-295.2 106,-295.2 100,-295.2 94,-289.2 94,-283.2 94,-283.2 94,-112.8 94,-112.8 94,-106.8 100,-100.8 106,-100.8"/>
<text text-anchor="middle" x="187" y="-278.6" font-family="Arial" font-size="14.00" fill="#000000">vip_group:lb</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_lb&#45;*</title>
<polygon fill="#ffffff" stroke="#333333" stroke-width="2" points="102,-185.6 102,-262.4 272,-262.4 272,-185.6 102,-185.6"/>
<text text-anchor="middle" x="187" y="-245.8" font-family="Arial" font-size="14.00" fill="#000000">lb&#45;* (2)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_db&#45;*</title>
<polygon fill="#ffffff" stroke="#333333" stroke-width="2" points="16,-16 16,-92.8 124,-92.8 124,-16 16,-16"/>
<text text-anchor="middle" x="70" y="-76.2" font-family="Arial" font-size="14.00" fill="#000000">db&#45;* (2)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_app&#45;*</title>
<polygon fill="#ffffff" stroke="#333333" stroke-width="2" points="16,-100.8 16,-177.6 86,-177.6 86,-100.8 16,-100.8"/>
<text text-anchor="middle" x="51" y="-161" font-family="Arial" font-size="14.00" fill="#000000">app&#45;* (3)</text>
</g>
<!-- app&#45;*:rails -->
<g id="node1" class="node">
<title>app&#45;*:rails</title>
<path fill="#4b75b9" stroke="#ffffff" stroke-width="2" d="M66,-144.8C66,-144.8 36,-144.8 36,-144.8 30,-144.8 24,-138.8 24,-132.8 24,-132.8 24,-120.8 24,-120.8 24,-114.8 30,-108.8 36,-108.8 36,-108.8 66,-108.8 66,-108.8 72,-108.8 78,-114.8 78,-120.8 78,-120.8 78,-132.8 78,-132.8 78,-138.8 72,-144.8 66,-144.8"/>
<text text-anchor="middle" x="51" y="-122.6" font-family="Arial" font-size="14.00" fill="#ffffff">rails</text>
</g>
<!-- db&#45;*:postgresql -->
<g id="node2" class="node">
<title>db&#45;*:postgresql</title>
<path fill="#4b75b9" stroke="#ffffff" stroke-width="2" d="M104.2457,-60C104.2457,-60 35.7543,-60 35.7543,-60 29.7543,-60 23.7543,-54 23.7543,-48 23.7543,-48 23.7543,-36 23.7543,-36 23.7543,-30 29.7543,-24 35.7543,-24 35.7543,-24 104.2457,-24 104.2457,-24 110.2457,-24 116.2457,-30 116.2457,-36 116.2457,-36 116.2457,-48 116.2457,-48 116.2457,-54 110.2457,-60 104.2457,-60"/>
<text text-anchor="middle" x="70" y="-37.8" font-family="Arial" font-size="14.00" fill="#ffffff">PostgreSQL</text>
</g>
<!-- app&#45;*:rails&#45;&gt;db&#45;*:postgresql -->
<g id="edge4" class="edge">
<title>app&#45;*:rails&#45;&gt;db&#45;*:postgresql</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M51,-108.3997C51,-108.3997 51,-70.0731 51,-70.0731"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="54.5001,-70.0731 51,-60.0731 47.5001,-70.0731 54.5001,-70.0731"/>
</g>
<!-- lb&#45;*:nginx -->
<g id="node3" class="node">
<title>lb&#45;*:nginx</title>
<path fill="#4b75b9" stroke="#ffffff" stroke-width="2" d="M152,-229.6C152,-229.6 122,-229.6 122,-229.6 116,-229.6 110,-223.6 110,-217.6 110,-217.6 110,-205.6 110,-205.6 110,-199.6 116,-193.6 122,-193.6 122,-193.6 152,-193.6 152,-193.6 158,-193.6 164,-199.6 164,-205.6 164,-205.6 164,-217.6 164,-217.6 164,-223.6 158,-229.6 152,-229.6"/>
<text text-anchor="middle" x="137" y="-207.4" font-family="Arial" font-size="14.00" fill="#ffffff">nginx</text>
</g>
<!-- lb&#45;*:nginx&#45;&gt;app&#45;*:rails -->
<g id="edge3" class="edge">
<title>lb&#45;*:nginx&#45;&gt;app&#45;*:rails</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M109.7891,-211C84.5938,-211 51,-211 51,-211 51,-211 51,-155.0701 51,-155.0701"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="54.5001,-155.0701 51,-145.0701 47.5001,-155.0702 54.5001,-155.0701"/>
</g>
<!-- lb&#45;*:keepalived -->
<g id="node4" class="node">
<title>lb&#45;*:keepalived</title>
<path fill="#4b75b9" stroke="#ffffff" stroke-width="2" d="M252.4089,-229.6C252.4089,-229.6 193.5911,-229.6 193.5911,-229.6 187.5911,-229.6 181.5911,-223.6 181.5911,-217.6 181.5911,-217.6 181.5911,-205.6 181.5911,-205.6 181.5911,-199.6 187.5911,-193.6 193.5911,-193.6 193.5911,-193.6 252.4089,-193.6 252.4089,-193.6 258.4089,-193.6 264.4089,-199.6 264.4089,-205.6 264.4089,-205.6 264.4089,-217.6 264.4089,-217.6 264.4089,-223.6 258.4089,-229.6 252.4089,-229.6"/>
<text text-anchor="middle" x="223" y="-207.4" font-family="Arial" font-size="14.00" fill="#ffffff">keepalived</text>
</g>
<!-- vip_group:lb:vip -->
<g id="node5" class="node">
<title>vip_group:lb:vip</title>
<path fill="#4b75b9" stroke="#ffffff" stroke-width="2" d="M238,-144.8C238,-144.8 208,-144.8 208,-144.8 202,-144.8 196,-138.8 196,-132.8 196,-132.8 196,-120.8 196,-120.8 196,-114.8 202,-108.8 208,-108.8 208,-108.8 238,-108.8 238,-108.8 244,-108.8 250,-114.8 250,-120.8 250,-120.8 250,-132.8 250,-132.8 250,-138.8 244,-144.8 238,-144.8"/>
<text text-anchor="middle" x="223" y="-122.6" font-family="Arial" font-size="14.00" fill="#ffffff">vip</text>
</g>
<!-- lb&#45;*:keepalived&#45;&gt;vip_group:lb:vip -->
<g id="edge5" class="edge">
<title>lb&#45;*:keepalived&#45;&gt;vip_group:lb:vip</title>
<path fill="none" stroke="#4b75b9" stroke-width="2" stroke-dasharray="5,2" d="M223,-193.1997C223,-193.1997 223,-152.8731 223,-152.8731"/>
<ellipse fill="#4b75b9" stroke="#4b75b9" stroke-width="2" cx="223" cy="-148.8731" rx="4" ry="4"/>
</g>
<!-- vip_group:lb:vip&#45;&gt;lb&#45;*:nginx -->
<g id="edge2" class="edge">
<title>vip_group:lb:vip&#45;&gt;lb&#45;*:nginx</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M195.8428,-126C171.6544,-126 140.0614,-126 140.0614,-126 140.0614,-126 140.0614,-183.4464 140.0614,-183.4464"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="136.5614,-183.4464 140.0614,-193.4464 143.5614,-183.4465 136.5614,-183.4464"/>
</g>
<!-- internet -->
<g id="node6" class="node">
<title>internet</title>
<path fill="none" stroke="#000000" stroke-width="2" d="M346.1796,-229.6C346.1796,-229.6 307.8204,-229.6 307.8204,-229.6 301.8204,-229.6 295.8204,-223.6 295.8204,-217.6 295.8204,-217.6 295.8204,-205.6 295.8204,-205.6 295.8204,-199.6 301.8204,-193.6 307.8204,-193.6 307.8204,-193.6 346.1796,-193.6 346.1796,-193.6 352.1796,-193.6 358.1796,-199.6 358.1796,-205.6 358.1796,-205.6 358.1796,-217.6 358.1796,-217.6 358.1796,-223.6 352.1796,-229.6 346.1796,-229.6"/>
<text text-anchor="middle" x="327" y="-207.4" font-family="Arial" font-size="14.00" fill="#000000">internet</text>
</g>
<!-- internet&#45;&gt;vip_group:lb:vip -->
<g id="edge1" class="edge">
<title>internet&#45;&gt;vip_group:lb:vip</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M327,-193.4464C327,-168.3193 327,-126 327,-126 327,-126 260.0533,-126 260.0533,-126"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="260.0533,-122.5001 250.0533,-126 260.0532,-129.5001 260.0533,-122.5001"/>
</g>
</g>
</svg>
