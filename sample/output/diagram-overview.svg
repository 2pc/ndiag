<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: ndiag Pages: 1 -->
<svg width="382pt" height="548pt"
 viewBox="0.00 0.00 382.00 548.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 544)">
<title>ndiag</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-544 378,-544 378,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_consul:dc1</title>
<path fill="#4b75b9" fill-opacity="0.200000" stroke="#4b75b9" stroke-opacity="0.200000" d="M20,-8C20,-8 292,-8 292,-8 298,-8 304,-14 304,-20 304,-20 304,-520 304,-520 304,-526 298,-532 292,-532 292,-532 20,-532 20,-532 14,-532 8,-526 8,-520 8,-520 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="156" y="-515.4" font-family="Arial" font-size="14.00" fill="#000000">consul:dc1</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_vip_group:lb</title>
<path fill="#4b75b9" fill-opacity="0.200000" stroke="#4b75b9" stroke-opacity="0.200000" d="M114,-255.3C114,-255.3 284,-255.3 284,-255.3 290,-255.3 296,-261.3 296,-267.3 296,-267.3 296,-487.2 296,-487.2 296,-493.2 290,-499.2 284,-499.2 284,-499.2 114,-499.2 114,-499.2 108,-499.2 102,-493.2 102,-487.2 102,-487.2 102,-267.3 102,-267.3 102,-261.3 108,-255.3 114,-255.3"/>
<text text-anchor="middle" x="199" y="-482.6" font-family="Arial" font-size="14.00" fill="#000000">vip_group:lb</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_lb&#45;*</title>
<polygon fill="#ffffff" stroke="#333333" stroke-width="2" points="110,-356.6 110,-466.4 288,-466.4 288,-356.6 110,-356.6"/>
<text text-anchor="middle" x="199" y="-449.8" font-family="Arial" font-size="14.00" fill="#000000">lb&#45;* (2)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_db&#45;*</title>
<polygon fill="#ffffff" stroke="#333333" stroke-width="2" points="16,-16 16,-125.8 124,-125.8 124,-16 16,-16"/>
<text text-anchor="middle" x="70" y="-109.2" font-family="Arial" font-size="14.00" fill="#000000">db&#45;* (2)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_app&#45;*</title>
<polygon fill="#ffffff" stroke="#333333" stroke-width="2" points="16,-133.8 16,-348.6 94,-348.6 94,-133.8 16,-133.8"/>
<text text-anchor="middle" x="55" y="-332" font-family="Arial" font-size="14.00" fill="#000000">app&#45;* (3)</text>
</g>
<!-- app&#45;*:nginx -->
<g id="node1" class="node">
<title>app&#45;*:nginx</title>
<path fill="#ffffff" stroke="#4b75b9" stroke-width="3" stroke-opacity="0.400000" d="M73.5,-315.8C73.5,-315.8 36.5,-315.8 36.5,-315.8 30.5,-315.8 24.5,-309.8 24.5,-303.8 24.5,-303.8 24.5,-258.8 24.5,-258.8 24.5,-252.8 30.5,-246.8 36.5,-246.8 36.5,-246.8 73.5,-246.8 73.5,-246.8 79.5,-246.8 85.5,-252.8 85.5,-258.8 85.5,-258.8 85.5,-303.8 85.5,-303.8 85.5,-309.8 79.5,-315.8 73.5,-315.8"/>
<image xlink:href="/var/folders/fp/hk95_wsj7s18mmc9drvrxdp1tt294n/T/ndiag.054003/proxy.svg" width="45px" height="45px" preserveAspectRatio="xMinYMin meet" x="33" y="-311.3"/>
<text text-anchor="start" x="38.7728" y="-253.7" font-family="Arial" font-size="14.00" fill="#333333">nginx</text>
</g>
<!-- app&#45;*:rails -->
<g id="node2" class="node">
<title>app&#45;*:rails</title>
<path fill="#ffffff" stroke="#4b75b9" stroke-width="3" stroke-opacity="0.400000" d="M73.5,-210.8C73.5,-210.8 36.5,-210.8 36.5,-210.8 30.5,-210.8 24.5,-204.8 24.5,-198.8 24.5,-198.8 24.5,-153.8 24.5,-153.8 24.5,-147.8 30.5,-141.8 36.5,-141.8 36.5,-141.8 73.5,-141.8 73.5,-141.8 79.5,-141.8 85.5,-147.8 85.5,-153.8 85.5,-153.8 85.5,-198.8 85.5,-198.8 85.5,-204.8 79.5,-210.8 73.5,-210.8"/>
<image xlink:href="/var/folders/fp/hk95_wsj7s18mmc9drvrxdp1tt294n/T/ndiag.054003/cube4.svg" width="45px" height="45px" preserveAspectRatio="xMinYMin meet" x="33" y="-206.3"/>
<text text-anchor="start" x="39.9488" y="-148.7" font-family="Arial" font-size="14.00" fill="#333333">Rails</text>
</g>
<!-- app&#45;*:nginx&#45;&gt;app&#45;*:rails -->
<g id="edge4" class="edge">
<title>app&#45;*:nginx&#45;&gt;app&#45;*:rails</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M55,-246.6281C55,-246.6281 55,-220.9355 55,-220.9355"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="58.5001,-220.9355 55,-210.9355 51.5001,-220.9356 58.5001,-220.9355"/>
</g>
<!-- db&#45;*:postgresql -->
<g id="node3" class="node">
<title>db&#45;*:postgresql</title>
<path fill="#ffffff" stroke="#4b75b9" stroke-width="3" stroke-opacity="0.400000" d="M104,-93C104,-93 36,-93 36,-93 30,-93 24,-87 24,-81 24,-81 24,-36 24,-36 24,-30 30,-24 36,-24 36,-24 104,-24 104,-24 110,-24 116,-30 116,-36 116,-36 116,-81 116,-81 116,-87 110,-93 104,-93"/>
<image xlink:href="/var/folders/fp/hk95_wsj7s18mmc9drvrxdp1tt294n/T/ndiag.054003/db.svg" width="60px" height="45px" preserveAspectRatio="xMinYMin meet" x="40" y="-88.5"/>
<text text-anchor="start" x="31.8773" y="-30.9" font-family="Arial" font-size="14.00" fill="#333333">PostgreSQL</text>
</g>
<!-- app&#45;*:rails&#45;&gt;db&#45;*:postgresql -->
<g id="edge5" class="edge">
<title>app&#45;*:rails&#45;&gt;db&#45;*:postgresql</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M55,-141.5933C55,-141.5933 55,-103.3657 55,-103.3657"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="58.5001,-103.3657 55,-93.3657 51.5001,-103.3658 58.5001,-103.3657"/>
</g>
<!-- lb&#45;*:nginx -->
<g id="node4" class="node">
<title>lb&#45;*:nginx</title>
<path fill="#ffffff" stroke="#4b75b9" stroke-width="3" stroke-opacity="0.400000" d="M167.5,-433.6C167.5,-433.6 130.5,-433.6 130.5,-433.6 124.5,-433.6 118.5,-427.6 118.5,-421.6 118.5,-421.6 118.5,-376.6 118.5,-376.6 118.5,-370.6 124.5,-364.6 130.5,-364.6 130.5,-364.6 167.5,-364.6 167.5,-364.6 173.5,-364.6 179.5,-370.6 179.5,-376.6 179.5,-376.6 179.5,-421.6 179.5,-421.6 179.5,-427.6 173.5,-433.6 167.5,-433.6"/>
<image xlink:href="/var/folders/fp/hk95_wsj7s18mmc9drvrxdp1tt294n/T/ndiag.054003/lb-l7.svg" width="45px" height="45px" preserveAspectRatio="xMinYMin meet" x="127" y="-429.1"/>
<text text-anchor="start" x="132.7728" y="-371.5" font-family="Arial" font-size="14.00" fill="#333333">nginx</text>
</g>
<!-- lb&#45;*:nginx&#45;&gt;app&#45;*:nginx -->
<g id="edge3" class="edge">
<title>lb&#45;*:nginx&#45;&gt;app&#45;*:nginx</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M138.8333,-364.5433C138.8333,-338.4096 138.8333,-307 138.8333,-307 138.8333,-307 95.7404,-307 95.7404,-307"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="95.7404,-303.5001 85.7404,-307 95.7404,-310.5001 95.7404,-303.5001"/>
</g>
<!-- lb&#45;*:keepalived -->
<g id="node5" class="node">
<title>lb&#45;*:keepalived</title>
<path fill="#ffffff" stroke="#4b75b9" stroke-width="3" stroke-opacity="0.400000" d="M268,-433.6C268,-433.6 210,-433.6 210,-433.6 204,-433.6 198,-427.6 198,-421.6 198,-421.6 198,-376.6 198,-376.6 198,-370.6 204,-364.6 210,-364.6 210,-364.6 268,-364.6 268,-364.6 274,-364.6 280,-370.6 280,-376.6 280,-376.6 280,-421.6 280,-421.6 280,-427.6 274,-433.6 268,-433.6"/>
<image xlink:href="/var/folders/fp/hk95_wsj7s18mmc9drvrxdp1tt294n/T/ndiag.054003/keepalived.svg" width="60px" height="45px" preserveAspectRatio="xMinYMin meet" x="209" y="-429.1"/>
<text text-anchor="start" x="205.5456" y="-371.5" font-family="Arial" font-size="14.00" fill="#333333">keepalived</text>
</g>
<!-- vip_group:lb:vip -->
<g id="node6" class="node">
<title>vip_group:lb:vip</title>
<path fill="#ffffff" stroke="#4b75b9" stroke-width="3" d="M254,-299.3C254,-299.3 224,-299.3 224,-299.3 218,-299.3 212,-293.3 212,-287.3 212,-287.3 212,-275.3 212,-275.3 212,-269.3 218,-263.3 224,-263.3 224,-263.3 254,-263.3 254,-263.3 260,-263.3 266,-269.3 266,-275.3 266,-275.3 266,-287.3 266,-287.3 266,-293.3 260,-299.3 254,-299.3"/>
<text text-anchor="middle" x="239" y="-277.1" font-family="Arial" font-size="14.00" fill="#333333">vip</text>
</g>
<!-- lb&#45;*:keepalived&#45;&gt;vip_group:lb:vip -->
<g id="edge6" class="edge">
<title>lb&#45;*:keepalived&#45;&gt;vip_group:lb:vip</title>
<path fill="none" stroke="#4b75b9" stroke-width="2" stroke-dasharray="5,2" d="M239,-364.3933C239,-364.3933 239,-307.4079 239,-307.4079"/>
<ellipse fill="#4b75b9" stroke="#4b75b9" stroke-width="2" cx="239" cy="-303.4079" rx="4" ry="4"/>
</g>
<!-- vip_group:lb:vip&#45;&gt;lb&#45;*:nginx -->
<g id="edge2" class="edge">
<title>vip_group:lb:vip&#45;&gt;lb&#45;*:nginx</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M211.9721,-281C188.8118,-281 159.1667,-281 159.1667,-281 159.1667,-281 159.1667,-354.3049 159.1667,-354.3049"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="155.6668,-354.3048 159.1667,-364.3049 162.6668,-354.3049 155.6668,-354.3048"/>
</g>
<!-- internet -->
<g id="node7" class="node">
<title>internet</title>
<path fill="none" stroke="#000000" stroke-width="2" d="M362,-433.6C362,-433.6 324,-433.6 324,-433.6 318,-433.6 312,-427.6 312,-421.6 312,-421.6 312,-376.6 312,-376.6 312,-370.6 318,-364.6 324,-364.6 324,-364.6 362,-364.6 362,-364.6 368,-364.6 374,-370.6 374,-376.6 374,-376.6 374,-421.6 374,-421.6 374,-427.6 368,-433.6 362,-433.6"/>
<image xlink:href="/var/folders/fp/hk95_wsj7s18mmc9drvrxdp1tt294n/T/ndiag.054003/cloud.svg" width="46px" height="45px" preserveAspectRatio="xMinYMin meet" x="320" y="-429.1"/>
<text text-anchor="start" x="319.6606" y="-371.5" font-family="Arial" font-size="14.00" fill="#333333">internet</text>
</g>
<!-- internet&#45;&gt;vip_group:lb:vip -->
<g id="edge1" class="edge">
<title>internet&#45;&gt;vip_group:lb:vip</title>
<path fill="none" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" d="M343,-364.3049C343,-329.4683 343,-281 343,-281 343,-281 276.0533,-281 276.0533,-281"/>
<polygon fill="#333333" fill-opacity="0.600000" stroke="#333333" stroke-width="2" stroke-opacity="0.600000" points="276.0533,-277.5001 266.0533,-281 276.0532,-284.5001 276.0533,-277.5001"/>
</g>
</g>
</svg>
